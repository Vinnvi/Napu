{% extends 'base_connected.html.twig' %}

{% block title %} {{userProfile.username}} {% endblock %}

{% block stylesheets %}
    <link href="{{ asset('css/pub_profile.css') }}" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
{% endblock %}

{% block body %}


    {% for label,flashes in app.session.flashbag.all %}
        {% for flash in flashes %}
            {% if (label == 'success' ) %}
                <div id="message">
                    <div style="padding: 5px;">
                        <div id="inner-message" class="alert alert-success fade show" >
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            {{flash}}
                        </div>
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    {% endfor %}


<div id="content">

    <div id="bannerProfile">
        {% if banned == false %}
            {% if requested == true %}
                <i class="bi bi-person-check" data-toggle="tooltipRequested" data-placement="top" title="Friendship requested" style="font-size: 2rem;" ></i>
            {% else %}
                {% if friends == true %}
                    <i class="bi bi-person-check-fill" data-toggle="tooltipRequested" data-placement="top" title="You are friends" style="font-size: 2rem;" ></i>
                {% else %}
                    <form method="post" action="{{ path('friendship.request.add', {id: userProfile.id}) }}">
                        <input type="hidden" name="_method" value="DELETE">
                        <input type="hidden" name="_token" value="{{ csrf_token('addFriendRequest' ~ userProfile.id) }}">
                        <button class="btn">
                            <i class="bi bi-person-plus" data-toggle="tooltipRequested" data-placement="top" title="request friend" style="font-size: 2rem;" ></i>
                        </button>
                    </form>
                {% endif %}
            {% endif %}
            <form method="post" action="{{ path('user.ban', {id: userProfile.id}) }}">
                <input type="hidden" name="_method" value="CREATE">
                <input type="hidden" name="_token" value="{{ csrf_token('banUser' ~ userProfile.id) }}">
                <button class="btn">
                    <i class="bi bi-dash-circle-fill" data-toggle="tooltipRequested" data-placement="top" title="add user in ban list" style="font-size: 2rem;" ></i>
                </button>
            </form>
        {% else %}
        {% endif %}
        
        <center> <h1> {{userProfile.username}} </h1> </center>

    </div>
    <div id="contentProfile">
        blablabla
    </div>

</div>
{% endblock %}

